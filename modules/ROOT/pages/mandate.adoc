= Настройка мандатной безопасности

.Настройка мандатной модели безопасности включает два этапа:
. Установка уровня допуска для сотрудника.
. Установка уровня доступа на карточки.

Изменить уровень безопасности как субъекта, так и объекта может только пользователь, включённый в группу *{dv-sec-admins-serv}* (_{dv-sec-admins-dir}_). Группа создаётся при первой установке системы, по умолчанию в неё включается только пользователь, производящий установку.

== Установка уровня допуска для сотрудника

Новый пользователь вносится в справочник сотрудников без определённого уровня допуска, т.е. соответствующее поле его карточки будет пустым. Если для сотрудника уровень допуска явно не задан, он будет определяться исходя из принадлежности к группе безопасности {dv}. Рядовые пользователи из групп _{dv} Users_, _{dv-power-users-serv}_ будут рассматриваться как обладатели уровня _самый низкий_, а для пользователей с администраторскими привилегиями он будет определён как _высокий_ для *{dv-admins-serv}* и _самый высокий_ для *{dv-sec-admins-serv}*.

.Чтобы изменить уровень допуска пользователя {dv}:
. В {wincl}е откройте _Справочник сотрудников_ от имени пользователя, включённого в группу _dv-sec-admins-serv_.
. Откройте карточку сотрудника, которому следует назначить уровень допуска.
. Перейдите на вкладку _Допуск_.
+
.Назначение уровня допуска сотруднику
image::mandate-users.png[Назначение уровня допуска сотруднику]
+
. Переключите _Уровень мандатной безопасности_ в нужное положение.
+
[NOTE]
====
Пользователи, включённые в группы безопасности *{dv-admins-serv}* и *{dv-sec-admins-serv}*, всегда имеют уровень допуска _высокий_ и _самый высокий_ соответственно. Если в справочнике сотрудников изменить уровень допуска такого пользователя, это изменение применено не будет.
====
+
. Нажмите кнопку *OK*.

== Установка уровня доступа к карточке

По умолчанию любой объект (папка или карточка) системы создаётся с уровнем безопасности _самый низкий_

. Откройте окно свойств объекта, уровень доступа к которому следует изменить.
. Перейдите на вкладку _Доступ_.
+
[NOTE]
====
Вкладка _Доступ_ отображается только у пользователей, включённых в группу *{dv-sec-admins-serv}*.
====
+
.Назначение уровня доступа к карточке
image::mandate-objects.png[Назначение уровня доступа к карточке]
+
. Переключите _Уровень доступа_ в нужное положение.
. Если такой же уровень доступа нужно назначить всем имеющимся *на данный момент* подчиненным объектам (всем папкам, вложенным в данную, всем карточкам, находящимся в этой папке и т.п.), установите флаг `*Применить к дочерним объектам*`.
+
[NOTE]
====
При следующем открытии вкладки _Доступ_ флаг `*Применить к дочерним объектам*` будет показан снятым.

Дополнительная информация в пункте <<inheritance,Особенности наследования мандатной безопасности>>.
====
+
. Нажмите кнопку *OK*.

[#inheritance]
== Особенности наследования мандатной безопасности

Объект может унаследовать уровень доступа только от родительского объекта (папки или карточки) {dv}, субъект {dv} (владелец объекта) передать объекту свой уровень допуска не может.

Чтобы распространить уровень доступа на все существующие *в данный момент* дочерние объекты, необходимо использовать функцию `*Применить к дочерним объектам*` при настройке мандатной безопасности родительского объекта. Операция наследования уровня доступа является *атомарной*: новые дочерние объекты этого же родительского объекта будут создаваться с самым низким уровнем доступа.

[IMPORTANT]
====
Новый уровень доступа унаследуют и те дочерние объекты, у которых ранее он был выше, чем у родительского.
====

Уровень доступа наследуется только по сильной ссылке. Например, если был изменён уровень доступа папки и при этом был установлен флаг `*Применить к дочерним объектам*`, то:

* Будет изменён уровень доступа всех вложенных папок.
* Будет изменён уровень доступа всех карточек, находящихся в папке и вложенных папках.
* Будет изменён уровень доступа всех файлов и карточек файлов, приложенных к этим карточкам.
* Будет изменён уровень доступа карточек задач и согласований, созданных из этих карточек.
* Не будет изменён уровень доступа карточек, на которые ссылаются эти карточки.
* Не будет изменён уровень доступа карточек, созданных из этих карточек (связанных с ними темой обработки).
