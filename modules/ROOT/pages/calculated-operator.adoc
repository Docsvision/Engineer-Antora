= Добавление оператора, объединяющего группу элементов

При добавлении в дерево элементов вычисляемого поля нового узла следует сначала определить оператор, согласно которому будут объединяться его элементы. Чтобы добавить узловой оператор, нажмите кнопку image:buttons/If.png[Дерево] окна _Вычисляемое поле_. При этом откроется диалоговое окно _Элементы вычисляемого поля_.

.Окно "Элементы вычисляемого поля"
image::calculated-aggregate.png[Окно "Элементы вычисляемого поля"]

В поле _Оператор_ рассматриваемого окна из раскрывающегося списка выбирается оператор, согласно которому будут проводиться вычисления в группе.

Помимо оператора, применяющегося ко всем элементам группы, в окне _Элементы вычисляемого поля_ можно установить правила агрегации. Правила будут применяться к тем элементам, данные которых выбираются из множественных полей некоторого раздела.

При установленном флаге `*Агрегация*` становятся доступными остальные опции окна, определяющие правила агрегации:

* В поле _Разделитель_ вручную вводятся знаки, которыми будут разделяться значения поля.
* Если флаг `*Учитывать уникальные значения*` установлен, становится возможным ограничить число участвующих в агрегации элементов, исключив из нее повторяющиеся значения.
* В поле _Функция_ из раскрывающегося списка выбирается функция, применяемая к данным элементов группы.
* В поле _Раздел_ выбирается раздел, к элементам которого будет применена функция, выбранная в предыдущем поле.
* Поля секции _Первичный ключ агрегации_ обычно заполняются системой автоматически и доступны для изменения только при работе с присоединенной к ведущему разделу таблицей базы данных {dv} или ее полем.
+
.Данная секция содержит поля:
** _Поле_.
** _Тип поля_.

[IMPORTANT]
====
Использование функции конкатенации в случае, когда к ведущему разделу присоединена табличная секция, может приводить к искажению данных, отображаемых в представлении. Например, к появлению дубликатов в содержимом данного вычисляемого поля. Подобная ситуация возникает из-за наличия в промежуточных результатах агрегации нескольких записей с одинаковым идентификатором карточки -- `InstanceID` -- результат присоединения табличной секции.

При выводе значения вычисляемого поля, в котором используется конкатенация, в представление, возможна некорректная сортировка по такому полю.

Следует избегать использования функции конкатенации в подобных случаях.
====
