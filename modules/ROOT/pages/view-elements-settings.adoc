= Настроить элементы представления

.Чтобы настроить элементы представления:
. Откройте окно xref:view-data-settings.adoc#settings-window["Настройка данных представления"].
. Выделите в таблице _Ведущие разделы карточек_ строку, для которой будет проводиться настройка.
. Нажмите кнопку image:buttons/change.png[Блокнот с карандашом] *Изменить*, расположенную справа от таблицы _Ведущие разделы карточек_ (или дважды щелкните по выделенной строке этого поля).
+
Будет открыто окно _Настройка элементов представления_.
+
Основную часть окна составляет таблица из двух колонок: в правой отображаются названия всех колонок представления, а в левой пользователь определяет элементы представления (данные, которые будут выводиться в соответствующих колонках для указанного типа карточки).
+
.Окно "Настройка элементов представления"
image::view-setting.png[Окно "Настройка элементов представления"]
+
. Флаг `*Отключить ограничение по экземплярам*` позволяет вывести в представлении строки карточек.
+
Если флаг снят, каждой строке представления соответствует карточка. Когда флаг установлен, каждой строке представления соответствует строка карточки.
+
****
Например, при построении представления по справочнику сотрудников установка флага приведет к выводу в представлении данных о всех сотрудниках (справочник представляет собой карточку, строки которой соответствуют сотрудникам).

Другим примером может являться построение представления по свойствам входящего документа (свойств в каждом документе может быть несколько): при установленном флаге будут выведены свойства всех имеющихся в системе входящих документов.
****

[#data-source]
== Настройка источника данных для колонки

Для каждой колонки представления необходимо выбрать источник данных. Указание источника производится отдельно для каждой строки поля. Таким образом, в одной колонке для разных типов карточек могут быть выведены разные данные.

.Чтобы выбрать источник данных для элемента представления:
. Откройте окно xref:view-elements-settings.adoc["Настройка элементов представления"].
. Выделите строку (она соответствует колонке представления), для которой будет настраиваться источник данных.
. Нажмите кнопку image:buttons/change.png[Блокнот с карандашом] *Изменить* или дважды щелкните левой кнопкой мыши по выделенной строке, чтобы открыть окно _Настройка данных колонки_.
. Ознакомьтесь с уже настроенными параметрами.
+
Раздел карточки::
В поле отображаются тип и ведущий раздел карточки, для которого производится настройка элемента представления; поле не доступно для редактирования.
+
Название колонки::
В поле отображается название колонки, для которой производится настройка элемента; поле не доступно для редактирования.
+
Таблица::
В поле отображается название секции, из которой считывается информация элемента; поле заполняется автоматически после настройки элемента представления и не доступно для редактирования.
+
.Окно "Настройка данных колонки"
image::column-data.png[Окно "Настройка данных колонки"]
+
. В поле _Тип колонки_ выберите из раскрывающегося списка тип источника данных для элемента представления. От выбранного типа зависит способ выбора элемента представления.
+
* *_Поле раздела_* -- в поле следует <<data-source,выбрать раздел карточки>>, доступный в данном представлении.
* *_Вычисляемое поле_* -- данные будут вычисляться по некоторым правилам. Этот тип источника данных не доступен пользователям, не включенным в группу *{dv-admins-serv}*.
* *_Системное поле_* -- поле, в котором хранится системная информация о карточке.
* *_Поле ярлыка_* -- поле, в котором хранится информация о ярлыке карточки.
* *_Свойство карточки_* -- тип используется для работы с {dv} версий _4.5_ и ниже. Если выбрано свойство, следует вручную указать название нужного свойства в поле _Элемент_.
* *_Виртуальное поле_* -- данные будут выбираться из полей не являющегося ведущим раздела карточки или из другой карточки. Рядовой пользователь не может самостоятельно настроить виртуальное поле, но может использовать уже имеющиеся в системе.
+
Если в качестве типа колонки выбрать *_Системное поле_*, *_Поле ярлыка_* или *_Виртуальное поля_*, _Элемент_ представления выбирается из раскрывающегося списка. При этом можно выбрать:
+
--
.Для системного поля:
* `CardTypeID` -- идентификатор типа карточки.
* `ChangeDateTime` -- дата изменения карточки.
* `CreationDateTime` -- дата создания карточки.
* `Description` -- описание карточки.
* `InstanceID` -- идентификатор карточки.
* `Template` -- является ли карточка шаблоном.
--
+
--
.Для поля ярлыка:
* `CardTypeID` -- идентификатор типа.
* `Description` -- описание.
* `FolderID` -- идентификатор папки, в которой находится ярлык.
* `Mode` -- режим запуска.
* `ShortcutID` -- идентификатор ярлыка.
--
+
* Элемент виртуального поля выбирается из списка настроенных администратором для данного типа карточки.
+
.Примечания
****
Значение пользовательского поля (свойства) любого типа по умолчанию выводится в колонке формата _Строка_, но можно вручную настроить и соответствующий типу свойства формат колонки.

Возможно, что для какой-либо из категорий данных выбранное для отображения поле содержит несколько значений (например, несколько присоединенных файлов, пользовательских свойств или исполнителей). В этом случае для каждого элемента из этого множества в представлении будет формироваться отдельная строка, то есть информация одной карточки может описываться несколькими строками.

Важно различать поля _Дата создания_ и _Дата регистрации_. Зачастую даты в этих полях могут совпадать, но не всегда. Поле _Дата создания_ заполняется автоматически при создании карточки. Поле _Дата регистрации_ изменяется вручную и может предшествовать дате создания, так как регистрация могла быть проведена ранее (например, в бумажной форме).
****
+
. В поле _Элемент_ выберите источник данных элемента представления -- элемент таблицы базы данных {dv}, из которого считывается информация.
. Нажмите на кнопку *ОК*.

[#section-select]
== Выбор раздела

По умолчанию доступными для выбора являются поля ведущего раздела, указанного при выборе типа карточки на предыдущем шаге настройки.

.Чтобы выбрать раздел:
. Откройте окно <<data-source,"Настройки данных колонки">>.
. Выберите в поле _Тип колонки_ значение *_Поля раздела_*.
. Откройте окно _Выбор раздела_ нажатием на кнопку image:buttons/Select.png[Три точки], появившуюся рядом с полем _Элемент_.
+
.Окно "Выбор раздела"
image::select-section.png[Окно "Выбор раздела"]
+
****
В окне _Выбор раздела_ в виде дерева отображаются доступные разделы карточки со списком полей, из которых может быть выбран элемент представления. Если рядовой пользователь самостоятельно разрабатывает представление, то дерево содержит только ведущий раздел выбранного типа карточки. При редактировании созданного администратором представления дерево доступных разделов может иметь сложный вид.

Многие поля карточек являются ссылочными и, например, для того чтобы вывести в представлении вид документа, необходимо создать связь с разделом таблицы базы данных {dv}, хранящей данные по справочнику типов, а для вывода данных о сотруднике -- по справочнику сотрудников. При выборе ссылочного поля напрямую из ведущего раздела на экран будут выведен его идентификатор, поэтому как правило администратор {dv} создаёт соответствующее ему виртуальное поле, позволяющее вывести в представлении нужные данные.

При построении представлений рядовой пользователь может использовать включенные в систему (преднастроенные) и настроенные администратором {dv} виртуальные поля. Доступные для выбора из используемого ведущего раздела виртуальные поля выделяются в окне _Выбор раздела_ синим цветом.
****
+
. Выберите раздел, затем нажмите на кнопку *ОК*.
