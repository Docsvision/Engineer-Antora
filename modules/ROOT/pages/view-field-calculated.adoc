= Создание вычисляемого поля

Выбор типа колонки _вычисляемого поля_ в качестве источника данных для элемента представления подразумевает, что отображаемые данные не хранятся ни в одном разделе карточки, а могут быть получены путем некоторых вычислений, правила которых задаются специальным образом.

Вычисляемое поле дает возможность делать ограниченные вычисления типа формирования строки и простых арифметических операций на основе значений из колонок, которые указаны в таблице представления.

Таким образом, вычисляемое поле представляет собой совокупность элементов (и/или групп элементов), объединенных одной из следующих операций:

* Объединение элементов строкового типа с помощью операции *+*.
* Арифметические операции сложения, умножения или вычитания -- для элементов целого или дробного типа.
* Логические операции объединения и пересечения *И* и *ИЛИ* -- для элементов логического типа (Да\Нет).

Тип результата вычисляемого поля должен совпадать с типом колонки, которой сопоставлено это вычисляемое поле.

Если в поле _Тип колонки_ выбран пункт *Вычисляемое поле*, при нажатии кнопки image:buttons/three-dots.png[Три точки] в поле _Элемент_ открывается окно _Вычисляемое поле_, состоящее из секций _Элементы_ и _Соответствие результатов_ и соответствующих им кнопок управления.

.Окно "Вычисляемое поле"
image::calculated-field.png[Окно "Вычисляемое поле"]

В секции _Элементы_ находится дерево, отображающее части, из которых складываются данные вычисляемого поля и операторы, их связывающие. В дерево могут быть включены как единичные элементы, так и группы элементов (узлы); вычисления внутри каждого узла проводится согласно определённому оператору.

При добавлении в дерево нового узла сначала указывается оператор, применяемый к его элементам. Оператор добавляется по нажатию кнопки image:buttons/tree.png[Дерево], открывающей диалоговое окно _Элементы вычисляемого поля_ (поля этого окна описаны в пункте xref:calculated-operator.adoc[]). После описания оператора в узел поочередно добавляются элементы объединяемой им группы.

Вторая секция этого окна -- _Соответствие результатов_ -- позволяет указать, по каким принципам заменять значения полей, если эти значения являются для пользователя неинформативными (например, являются значениями некоторого перечисления). Поле и действия с ним описаны далее.

Новый элемент вычисляемого поля добавляется в выделенный узел дерева по нажатию кнопки image:buttons/add.png[Рамка с плюсом] *Добавить* окна _Вычисляемое поле_. При нажатии этой кнопки открывается окно _Элемент вычисляемого поля_, в котором прежде всего выбирается тип добавляемого элемента:

* _Постой_.
* _Набор вариантов_.
* _Набор условий_.
