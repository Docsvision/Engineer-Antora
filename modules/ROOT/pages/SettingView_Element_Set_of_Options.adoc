= Элемент вычисляемого поля типа 'Набор вариантов'

Значение [.kbd .ph .userinput]`Набор вариантов` в поле [.ph .uicontrol]*Тип элемента* следует выбрать, когда требуется сравнить значение поля (или введенное пользователем значение) с некоторыми условиями и в зависимости от того, какое из них выполнилось, вывести некоторые данные в представление.

В случае выбора этой опции окно [.keyword .wintitle]*Элемент вычисляемого поля* отличается от случая, рассмотренного в предыдущем пункте наличием поля с колонками [.keyword .parmname]_Условие_ и [.keyword .parmname]_Значение_ и возможностью выбора значения поля [.ph .uicontrol]*Тип значения*; совпадающие поля в этих случаях заполняются совершенно одинаково.

Заполнять поля рассматриваемого окна рекомендуется в следующем порядке: [.ph .uicontrol]*Поле раздела*, [.ph .uicontrol]*Функция*, [.ph .uicontrol]*Тип значения*. Данный порядок обусловлен зависимостью типа значения от выбранного поля раздела: при выборе другого поля тип данных может сброситься, что повлечет за собой смену всех введенных ранее вариантов.

image::img/Element_Calculated_Field_Set_of_Option.png[[.fig--title-label]#Рис. 1. # Окно "Элемент вычисляемого поля" при выборе типа элемента "Набор вариантов"]

Вычисление элемента поля при выборе опции [.kbd .ph .userinput]`Набор вариантов` производится следующим образом: к значению поля раздела, указанного в поле [.ph .uicontrol]*Поле* (или значению, введенному пользователем в поле [.ph .uicontrol]*Значение*) применяется функция, выбранная в поле [.ph .uicontrol]*Функция*; полученный результат последовательно сравнивается со значениями колонки [.keyword .parmname]_Условие_. Как только они совпадут, элементу вычисляемого поля присваивается значение из колонки [.keyword .parmname]_Значение_, соответствующей данному условию; на этом сравнение прекращается.

[NOTE]
====
[.note__title]#Прим.:# При установленном флаге [.ph .uicontrol]*Заменять пустое значение* сначала будет проведена замена, а уже потом сравнение.
====

Если значение поля (или введенное значение) не совпало ни с одним значением колонки Условие, то в представление будет выведено значение, установленное по умолчанию (устанавливается в окне [.keyword .wintitle]*Подэлемент вычисляемого поля*); если значение по умолчанию не установлено, то поле представления будет оставлено пустым.

Ввод каждого из условий сравнения производится в окне [.keyword .wintitle]*Подэлемент вычисляемого поля*. Перед вводом первого условия необходимо определить тип значений условий, указав его в поле [.ph .uicontrol]*Тип значения* окна [.keyword .wintitle]*Элемент вычисляемого поля*.

Для управления условиями сравнения служат кнопки [.ph .uicontrol]*Добавить*, [.ph .uicontrol]*Изменить* и [.ph .uicontrol]*Удалить* поля условий, позволяющие соответственно добавить новое, изменить и удалить уже существующее условие.

При нажатии кнопки image:img/Buttons/Add.png[image] [.ph .uicontrol]*Добавить* открывается окно [.keyword .wintitle]*Подэлемент вычисляемого поля*.

image::img/SubElement_Calculated_Field.png[[.fig--title-label]#Рис. 2. # Окно "Подэлемент вычисляемого поля"]

В окне этого элемента следует либо заполнить поле [.ph .uicontrol]*Вариант* (именно с ним будет проводится сравнение), введя туда значение способом, зависящим от выбранного типа, либо установить флаг [.ph .uicontrol]*По умолчанию*.

В остальных полях окна определяется значение, которое будет выводиться в представление; заполнение этих полей аналогично описанному в пункте xref:SettingView_Element_Simple.adoc[Простой элемент].

*На уровень выше:* xref:../topics/SettingView_Create_Calculated_Field.adoc[Создание вычисляемого поля]
