= Элемент вычисляемого поля типа 'Набор вариантов'

Значение [.kbd .ph .userinput]`Набор вариантов` в поле *Тип элемента* следует выбрать, когда требуется сравнить значение поля (или введенное пользователем значение) с некоторыми условиями и в зависимости от того, какое из них выполнилось, вывести некоторые данные в представление.

В случае выбора этой опции окно [.keyword .wintitle]*Элемент вычисляемого поля* отличается от случая, рассмотренного в предыдущем пункте наличием поля с колонками _Условие_ и _Значение_ и возможностью выбора значения поля *Тип значения*; совпадающие поля в этих случаях заполняются совершенно одинаково.

Заполнять поля рассматриваемого окна рекомендуется в следующем порядке: *Поле раздела*, *Функция*, *Тип значения*. Данный порядок обусловлен зависимостью типа значения от выбранного поля раздела: при выборе другого поля тип данных может сброситься, что повлечет за собой смену всех введенных ранее вариантов.

image::Element_Calculated_Field_Set_of_Option.png[Окно "Элемент вычисляемого поля" при выборе типа элемента "Набор вариантов"]

Вычисление элемента поля при выборе опции [.kbd .ph .userinput]`Набор вариантов` производится следующим образом: к значению поля раздела, указанного в поле *Поле* (или значению, введенному пользователем в поле *Значение*) применяется функция, выбранная в поле *Функция*; полученный результат последовательно сравнивается со значениями колонки _Условие_. Как только они совпадут, элементу вычисляемого поля присваивается значение из колонки _Значение_, соответствующей данному условию; на этом сравнение прекращается.

[NOTE]
====
[.note__title]#Прим.:# При установленном флаге *Заменять пустое значение* сначала будет проведена замена, а уже потом сравнение.
====

Если значение поля (или введенное значение) не совпало ни с одним значением колонки Условие, то в представление будет выведено значение, установленное по умолчанию (устанавливается в окне [.keyword .wintitle]*Подэлемент вычисляемого поля*); если значение по умолчанию не установлено, то поле представления будет оставлено пустым.

Ввод каждого из условий сравнения производится в окне [.keyword .wintitle]*Подэлемент вычисляемого поля*. Перед вводом первого условия необходимо определить тип значений условий, указав его в поле *Тип значения* окна [.keyword .wintitle]*Элемент вычисляемого поля*.

Для управления условиями сравнения служат кнопки *Добавить*, *Изменить* и *Удалить* поля условий, позволяющие соответственно добавить новое, изменить и удалить уже существующее условие.

При нажатии кнопки image:Buttons/Add.png[image] *Добавить* открывается окно [.keyword .wintitle]*Подэлемент вычисляемого поля*.

image::SubElement_Calculated_Field.png[Окно "Подэлемент вычисляемого поля"]

В окне этого элемента следует либо заполнить поле *Вариант* (именно с ним будет проводится сравнение), введя туда значение способом, зависящим от выбранного типа, либо установить флаг *По умолчанию*.

В остальных полях окна определяется значение, которое будет выводиться в представление; заполнение этих полей аналогично описанному в пункте xref:SettingView_Element_Simple.adoc[Простой элемент].

