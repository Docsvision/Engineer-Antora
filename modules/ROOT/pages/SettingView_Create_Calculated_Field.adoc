= Создание вычисляемого поля

Выбор типа колонки _вычисляемого поля_ в качестве источника данных для элемента представления подразумевает, что отображаемые данные не хранятся ни в одном разделе карточки, а могут быть получены путем некоторых вычислений, правила которых задаются в специальным образом.

Вычисляемое поле дает возможность делать ограниченные вычисления типа формирования строки и простых арифметических операций на основе значений из колонок, которые указаны в таблице представления.

Таким образом, вычисляемое поле представляет собой совокупность элементов (и/или групп элементов), объединенных одной из следующих операций:

* объединение элементов строкового типа с помощью операции [+];
* арифметические операции сложения, умножения или вычитания -- для элементов целого или дробного типа;
* логические операции объединения и пересечения [И] и [ИЛИ] -- для элементов логического типа (Да\Нет).

Тип результата вычисляемого поля должен совпадать с типом колонки, которой сопоставлено это вычисляемое поле.

При выборе в поле *Тип колонки* пункта `Вычисляемое поле`, по кнопке image:buttons/Select.png[image] поля *Элемент* открывается окно *Вычисляемое поле*, состоящее из секций *Элементы* и *Соответствие результатов* и соответствующих им кнопок управления.

image::Calculated_Field.png[Окно "Вычисляемое поле"]

В секции *Элементы* находится дерево, отображающее части, из которых складываются данные вычисляемого поля и операторы, их связывающие. В дерево могут быть включены как единичные элементы, так и группы элементов (узлы); вычисления внутри каждого узла проводится согласно некоторому оператору.

При добавлении в дерево нового узла вначале указывается оператор, применяемый к его элементам. Добавление оператора происходит по нажатию кнопки image:buttons/If.png[image], открывающей диалоговое окно *Элементы вычисляемого поля* (поля этого окна описаны в пункте xref:SettingView_Element_Grouping.adoc[Добавление оператора, объединяющего группу элементов]). После описания оператора в узел поочередно добавляются элементы объединяемой им группы.

Вторая секция этого окна -- *Соответствие результатов* -- позволяет указать, по каким принципам заменять значения полей, если эти значения являются для пользователя неинформативными (например, являются значениями некоторого перечисления). Описание этого поля и действий с ним приведено далее, в одноименном разделе данного руководства.

Новый элемент вычисляемого поля добавляется в выделенный узел дерева по нажатию кнопки image:buttons/Add.png[image] *Добавить* окна *Вычисляемое поле*. При нажатии этой кнопки открывается окно *Элемент вычисляемого поля*, в котором прежде всего выбирается тип добавляемого элемента:

* _простой_;
* _набор вариантов_;
* _набор условий_.
