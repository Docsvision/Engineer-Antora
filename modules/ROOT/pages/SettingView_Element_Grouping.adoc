= Добавление оператора, объединяющего группу элементов

При добавлении в дерево элементов вычисляемого поля нового узла следует вначале определить оператор, согласно которому будут объединяться его элементы. Для добавления узлового оператора нажмите кнопку image:buttons/If.png[image] окна *Вычисляемое поле*; при этом откроется диалоговое окно *Элементы вычисляемого поля*.

image::Elements_of_Calculated_Field.png[Окно "Элементы вычисляемого поля"]

В поле *Оператор* рассматриваемого окна из раскрывающегося списка выбирается оператор, согласно которому будут проводиться вычисления в группе.

Помимо оператора, применяющегося ко всем элементам группы, в окне *Элементы вычисляемого поля* можно установить правила агрегации, которые будут применяться к тем элементам из них, данные которых выбираются из множественных полей некоторого раздела.

При установленном флаге *Агрегация* становятся доступными остальные опции окна, определяющие правила агрегации:

* в поле *Разделитель* вручную вводятся знаки, которыми будут разделяться значения поля;
* установка флага *Учитывать уникальные значения* позволит ограничить число участвующих в агрегации элементов, исключив из нее повторяющиеся значения;
* в поле *Функция* из раскрывающегося списка выбирается функция, применяемая к данным элементов группы;
* в поле *Раздел* выбирается раздел, к элементам которого будет применена функция, выбранная в предыдущем поле;
* назначение секции *Первичный ключ агрегации* понятно из ее названия, отметим только, что обычно поля этой секции заполняются системой автоматически и доступны для изменения только при работе с присоединенной к ведущему разделу таблицей базы данных {dv} или ее полем; данная секция содержит поля:
** *Поле*;
** *Тип поля*.

[IMPORTANT]
====
Использование функции конкатенации в случае, когда к ведущему разделу присоединена табличная секция, может приводить к искажению данных, отображаемых в представлении, например, к появлению дубликатов в содержимом данного вычисляемого поля. Подобная ситуация возникает из-за наличия в промежуточных результатах агрегации нескольких записей с одинаковым идентификатором карточки -- InstanceID -- результат присоединения табличной секции.

При выводе значения вычисляемого поля, в котором используется конкатенация, в представление, возможна некорректная сортировка по такому полю.

Следует избегать использования функции конкатенации в подобных случаях.
====
