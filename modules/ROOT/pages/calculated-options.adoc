= Элемент вычисляемого поля типа "Набор вариантов"

Значение *_Набор вариантов_* в поле _Тип элемента_ следует выбрать, когда требуется сравнить значение поля (или введенное пользователем значение) с некоторыми условиями и в зависимости от того, какое из них выполнилось, вывести некоторые данные в представление.

В случае выбора этой опции в окне _Элемент вычисляемого поля_ появляется поле с колонками _Условие_ и _Значение_, также становится доступным выбор значения поля _Тип значения_. Совпадающие поля заполняются аналогично xref:calculated-simple.adoc[предыдущим пунктам].

Заполнять поля рассматриваемого окна рекомендуется в следующем порядке: _Поле раздела_, _Функция_, _Тип значения_. Данный порядок обусловлен зависимостью типа значения от выбранного поля раздела: при выборе другого поля тип данных может сброситься, что повлечет за собой смену всех введенных ранее вариантов.

.Окно "Элемент вычисляемого поля" при выборе типа элемента "Набор вариантов"
image::Element_Calculated_Field_Set_of_Option.png[Окно "Элемент вычисляемого поля" при выборе типа элемента "Набор вариантов"]

Элемент поля при выборе опции *_Набор вариантов_* вычисляется следующим образом: к значению поля раздела, указанного в поле _Поле_ (или значению, введенному пользователем в поле _Значение_) применяется функция, выбранная в поле _Функция_. Полученный результат последовательно сравнивается со значениями колонки _Условие_. Как только они совпадут, элементу вычисляемого поля присваивается значение из колонки _Значение_, соответствующей данному условию. На этом сравнение прекращается.

[NOTE]
====
При установленном флаге `*Заменять пустое значение*` сначала будет проведена замена, а уже потом сравнение.
====

Если значение поля (или введенное значение) не совпало ни с одним значением колонки _Условие_, то в представление будет выведено значение, установленное по умолчанию (устанавливается в окне _Подэлемент вычисляемого поля_). Если значение по умолчанию не установлено, то поле представления будет оставлено пустым.

Ввод каждого из условий сравнения производится в окне _Подэлемент вычисляемого поля_. Перед вводом первого условия необходимо определить тип значений условий, указав его в поле _Тип значения_ окна _Элемент вычисляемого поля_.

Для управления условиями сравнения служат кнопки *Добавить*, *Изменить* и *Удалить* поля условий, позволяющие соответственно добавить новое, изменить и удалить уже существующее условие.

При нажатии кнопки image:buttons/Add.png[Рамка с плюсом] *Добавить* открывается окно _Подэлемент вычисляемого поля_.

.Окно "Подэлемент вычисляемого поля"
image::SubElement_Calculated_Field.png[Окно "Подэлемент вычисляемого поля"]

В окне этого элемента следует либо заполнить поле _Вариант_ (именно с ним будет проводится сравнение), введя туда значение способом, зависящим от выбранного типа, либо установить флаг `*По умолчанию*`.

В остальных полях окна определяется значение, которое будет выводиться в представление. Поля заполняются аналогично описанию в пункте xref:calculated-simple.adoc[Простой элемент].
